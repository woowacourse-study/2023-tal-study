# story 2. 광섬유를 이용한 액세스 회선 (FTTH)  
## 1. 광섬유의 기본
> 광섬유는 이중 구조의 가는 섬유질의 투명한 재질(유리나 플라스틱)으로 만들어져 있다.  
> 코어 부분에 광신호를 흘려서 디지털 데이터를 전달  
> 밝은 상태가 디지털 데이터의 1을 나타내고, 어두운 상태가 0을 나타냄  

- 클래드(clad): 코어의 주변 부분이며 굴절률이 낮다.  
- 코어: 케이블의 중심 부분. 굴절률이 높으며, 광신호가 통과하는 부분이다.  


- 광통신 원리
  - 디지털 데이터를 전기 신호로 변환한다.
    - 전기 신호는 1을 높은 전압으로, 0을 낮은 전압으로 나타냄
  - 전기 신호를 광신호로 변환한다.
    - 전압이 높으면 밝아지고, 낮으면 어두워짐
  - 광섬유 안에 빛을 통과 시키면 수신 측에 도착한다.  
  - 수신측에는 빛에 감응하여 밝기에 따라 전압을 일으키는 수광 소자가 있음
    - 밝으면 높은 전압의 전기 신호, 어두우면 낮은 전압의 전기 신호
  - 전기 신호를 디지털 데이터로 변환하면 데이터를 수신할 수 있다.  

## 2. 싱글모드와 멀티모드 차이
> 광섬유의 재질이 달라서 생기는 `빛의 투과율`, `굴절률의 차이`, `코어의 직경` 등이 빛의 전달 방법에 영향을 끼친다.  
> 그 중 코어의 굵기가 크게 영향을 끼침  

### 광섬유 속을 빛이 진행하는 과정
- 광원에서 나온 빛이 광섬유의 코어 부분에 들어온다.
- 코어 부분에는 여러 각도의 빛이 들어 간다.  
  - 입사각(들어오는 각도)이 큰 것은 코어와 클래드 경계면에서 굴절되어 밖으로 나감
  - 입사각이 작은 빛 중 일부만 경계면에 전반사 되어 코어 속을 진행
    - 빛은 파의 일종이므로 코어와 클래드의 경계면에서 반사할 때 각도에 따라 위상차가 발생하는 성질을 가짐
    - 위상차가 있으면 상쇄되어 소멸, 없으면 광섬유 속을 진행
    - 일부 빛은 경계면에 부딪혀서 반사될 때 위상이 달라 진다. 이에 따라 위상차가 생기면 상쇄된다.  

코어의 직경은 입사각을 고려하여 결정되어 있다.    
코어의 직경에 따라 광섬유의 성질이 달라진다.  

### 싱글모드
> 싱글모드는 직경이 가는 것이다(8~10)  
> 위상이 같은 각도 중에서 가장 각도가 작은 빛만 들어가도록 코어의 직경을 가늘게 만든 광섬유  

- 코어 속을 진행하는 빛이 한 개
- 빛의 양이 적음
- 광원이나 수광 소자의 성능이 높아야 한다.  
- 신호 변형이 적다는 이점
- 케이블 길이를 길게 할 수 있음
- FTTH는 싱글모드 광섬유를 사용

### 멀티모드
> 멀티모드는 직경이 굵은 것이다(50 또는 62.5)    
> 코어의 직경이 굵고 입사각이 큰 빛도 들어가므로 복수의 빛이 코어 속을 진행  

- 복수의 빛이 흐름
- 빛의 양이 많음
- 광원이나 수광 소자의 성능이 비교적 낮은 것이라도 상관 없음 (가격을 줄일 수 있음)
- 신호 변형이 발생할 수 있음
  - 반사 각이 다른 몇개의 빛이 코어 속을 진행
  - 반사각이 큰 빛은 반사 횟수가 많고 거리가 길어짐
  - 반사각이 작은 빛은 반사 횟수가 적고 거리가 짧아짐
  - 신호 도착 시간이 일정하지 않아 신호의 폭이 넓어짐 -> 신호가 변형됨을 의미
  - 변형이 허용 한도를 초과하면 통신 오류를 발생 시킨다.  

## 3. 광섬유를 분기시켜서 비용을 절감한다.  
> ADSL 대신 광섬유를 사용하여 사용자측의 인터넷 접속용 라우터와 인터넷측의 BAS를 접속하는 것이 FTTH 액세스 회선이다.  
> 이 형태는 2가지로 나눌 수 있다.  

### 분기 하지 않는 유형: 하나의 광섬유로 사용자측과 가까운 전화국에 접속
> 사용자와 전화국 사이를 한 개의 광섬유로 직접 연결

- 패킷의 흐름
  - 사용자측 미디어 컨버터에서 이더넷의 전기 신호를 광신호로 변환
  - 광신호는 미디어 컨버터에 연결된 광섬유로 들어간다.  
  - 광섬유는 BAS의 앞에 있는 집합형의 미디어 컨버터에 연결되어 있기 때문에 그 속으로 광신호 전달
  - 집합형 미디어 컨버터에서 전기 신호로 복원되어 BAS의 포트가 수신하고 인터넷의 내부로 패킷 중계

#### 파장 다중
> 한 개의 광섬유를 사용하여 파장이 서로 다른 복수의 광신호를 흘리는 것
- 상향 광신호와 하향 광신호는 광섬유 속에서 혼합된다.  
  - 상향 광신호: 인터넷을 향해 올리는 광신호
  - 하향 광신호: 사용자를 향해 내리는 광신호
- 파장이 다른 빛은 혼합되어도 프리즘의 원리로 분리할 수 있다. 그래서 섞여있어도 괜찮다.  

### 분기하는 유형: 분기 장치를 두고 복수의 사용자를 연결
> 사용자 부근의 전주에 광스플리터라는 분기 장치를 설치하고, 광섬유를 분리시켜 복수의 사용자를 연결하는 방법

- 패킷의 흐름    
  - 사용자측에 미디어 컨버터 대신 `ONU` 설치하여 광신호로 변환
  - BAS 앞에 있는 OLT로 흐름
  - 흐름 자체는 분기하지 않는 유형과 같음
- 복수의 사용자가 동시에 패킷을 송신하면 광스플리터 부분에서 패킷의 광신호가 충돌
  - OLT와 ONU에는 패킷의 충돌 방지를 위한 `타이밍 조정 기능`이 있음

#### OLT와 ONU의 타이밍 조정
- 사용자가 신호를 보낼 때
  - OLT가 송신 타이밍을 조정하여 ONU에 송신 지시
  - ONU가 송신 동작 실행

- BAS측에서 사용자에게 신호를 보낼 때
  - 신호가 분기 장치에서 뿌려짐
  - 충돌은 발생하지 않지만 수신처 이외의 곳에도 신호가 흐름 (누설 가능성)
  - 패킷의 맨 앞부분에 각각의 ONU 식별 정보 부가
  - 자신에게 보낸 경우에만 신호 변환
  



